SET(WX_VERSION "${WXWIDGETS_VERSION_MAJOR}${WXWIDGETS_VERSION_MINOR}")

IF (WIN32)
	SET(WX_LIB_DIR "${WXWIDGETS_DIR}/lib/vc_x64_lib")
	SET(WX_LIB_EXTENSION ".lib")
ELSE ()
	SET(WX_LIB_DIR "${WXWIDGETS_DIR}/lib/<gcc/clang>_lib")
	SET(WX_LIB_EXTENSION ".a")
ENDIF ()

SET(WX_DEPS
	"png"
	"zlib"
	"jpeg"
	"tiff"
	"expat"
)

SET(WX_EXTENSIONS
	"core"
	"richtext"
	"html"
	"qa"
	"xrc"
	"propgrid"
	"aui"
	"adv"
)

SET(WX_DEBUG_LIBS
	"${WX_LIB_DIR}/wxbase${WX_VERSION}ud${WX_LIB_EXTENSION}"
	"${WX_LIB_DIR}/wxbase${WX_VERSION}ud_xml${WX_LIB_EXTENSION}"
	"${WX_LIB_DIR}/wxpngd${WX_LIB_EXTENSION}"
)

SET(WX_RELEASE_LIBS
	"${WX_LIB_DIR}/wxbase${WX_VERSION}u${WX_LIB_EXTENSION}"
	"${WX_LIB_DIR}/wxbase${WX_VERSION}u_xml${WX_LIB_EXTENSION}"
)

FOREACH (WX_DEP ${WX_DEPS})
	SET(WX_DEBUG_LIBS "${WX_DEBUG_LIBS}" "${WX_LIB_DIR}/wx${WX_DEP}d${WX_LIB_EXTENSION}")
	SET(WX_RELEASE_LIBS "${WX_RELEASE_LIBS}" "${WX_LIB_DIR}/wx${WX_DEP}${WX_LIB_EXTENSION}")
ENDFOREACH ()

FOREACH (WX_EXTENSION ${WX_EXTENSIONS})
	SET(WX_DEBUG_LIBS "${WX_DEBUG_LIBS}" "${WX_LIB_DIR}/wxmsw${WX_VERSION}ud_${WX_EXTENSION}${WX_LIB_EXTENSION}")
	SET(WX_RELEASE_LIBS "${WX_RELEASE_LIBS}" "${WX_LIB_DIR}/wxmsw${WX_VERSION}u_${WX_EXTENSION}${WX_LIB_EXTENSION}")
ENDFOREACH ()

IF (WIN32)
	SET(WX_ADDITIONAL_LIBS
		"comctl32.lib"
		"rpcrt4.lib"
		"winmm.lib"
		"advapi32.lib"
		"wsock32.lib"
	)

	SET(WX_DEBUG_LIBS ${WX_DEBUG_LIBS} ${WX_ADDITIONAL_LIBS})
	SET(WX_RELEASE_LIBS ${WX_RELEASE_LIBS} ${WX_ADDITIONAL_LIBS})
ENDIF ()

FILE(GLOB_RECURSE SNUFF_CONSOLE_ROOT
	"*.cc"
	"*.h"
)

FILE(GLOB_RECURSE SNUFF_CONSOLE_FORMS
	"forms/*.cpp"
	"forms/*.h"
)

FILE(GLOB_RECURSE SNUFF_CONSOLE_APPLICATION
	"application/*.cc"
	"application/*.h"
)

FILE(GLOB_RECURSE SNUFF_CONSOLE_LOGGING
	"logging/*.cc"
	"logging/*.h"
)

SOURCE_GROUP("\\" FILES ${SNUFF_CONSOLE_ROOT})
SOURCE_GROUP("forms" FILES ${SNUFF_CONSOLE_FORMS})
SOURCE_GROUP("application" FILES ${SNUFF_CONSOLE_APPLICATION})
SOURCE_GROUP("logging" FILES ${SNUFF_CONSOLE_LOGGING})

SET(SNUFF_CONSOLE_SOURCES
	${SNUFF_CONSOLE_ROOT}
	${SNUFF_CONSOLE_FORMS}
	${SNUFF_CONSOLE_APPLICATION}
	${SNUFF_CONSOLE_LOGGING}
)

ADD_EXECUTABLE(snuffbox-console ${SNUFF_CONSOLE_SOURCES})
TARGET_LINK_LIBRARIES(snuffbox-console snuffbox-logging)
TARGET_LINK_LIBRARIES(snuffbox-console debug "${WX_DEBUG_LIBS}" optimized "${WX_RELEASE_LIBS}")
INCLUDE_DIRECTORIES("${WXWIDGETS_DIR}/include")
INCLUDE_DIRECTORIES(
	$<$<CONFIG:Debug>:${WX_LIB_DIR}/mswud>
	$<$<CONFIG:Release>:${WX_LIB_DIR}/mswu>
)

IF (WIN32)
	SET_TARGET_PROPERTIES(snuffbox-console PROPERTIES LINK_FLAGS_DEBUG "/SUBSYSTEM:WINDOWS")
	SET_TARGET_PROPERTIES(snuffbox-console PROPERTIES LINK_FLAGS_RELEASE "/SUBSYSTEM:WINDOWS")
ENDIF ()